record(bo, "$(P)TsInpMode-Sel") {
    field( DTYP, "EVG SEQ INPUT MODE")
    field( DESC, "EVG Sequence")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "1")
    field( UDF,  "0")
    field( ZNAM, "EGU")
    field( ONAM, "TICKS")
    info(autosaveFields_pass0, "VAL")
}

record(bi, "$(P)TsInpMode-RB") {
    field( DTYP, "EVG SEQ INPUT MODE")
    field( DESC, "EVG Sequence Input Mode")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")
    field( ZNAM, "EGU")
    field( ONAM, "TICKS")
}

record(waveform, "$(P)EvtCode-SP") {
    field( DTYP, "EVG SEQ EVENT CODE")
    field( DESC, "Sequence event code array")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( NELM, "$(NELM)")
    field( FTVL, "UCHAR")
    info( autosaveFields_pass1, "VAL")
}

record(waveform, "$(P)EvtCode-RB") {
    field( DTYP, "EVG SEQ EVENT CODE RB")
    field( DESC, "Sequence event code readback")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")
    field( NELM, "$(NELM)")
    field( FTVL, "UCHAR")
}

record(waveform, "$(P)Timestamp-SP") {
    field( DTYP, "EVG SEQ TIMESTAMP")
    field( DESC, "Sequence timestamp array")
    field( INP,  "#C$(cardNum) S$(seqNum) @1000000")
    field( NELM, "$(NELM)")
    field( FTVL, "DOUBLE")
    info( autosaveFields_pass0, "INP")
    info( autosaveFields_pass1, "VAL")
}

record(waveform, "$(P)Timestamp-RB") {
    field( DTYP, "EVG SEQ TIMESTAMP RB")
    field( DESC, "Sequence timestamp readback")
    field( INP,  "#C$(cardNum) S$(seqNum) @1000000")
    field( SCAN, "I/O Intr")
    field( NELM, "$(NELM)")
    field( FTVL, "DOUBLE")
}

record(mbbo, "$(P)RunMode-Sel") {
    field( DTYP, "EVG SEQ RUN MODE")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( UDF,  "0")
    field( ZRST, "Normal")
    field( ONST, "Automatic")
    field( TWST, "Single")
    field( THSV, "INVALID")
    field( FRSV, "INVALID")
    field( FVSV, "INVALID")
    field( SXSV, "INVALID")
    field( SVSV, "INVALID")
    field( EISV, "INVALID")
    field( NISV, "INVALID")
    field( TESV, "INVALID")
    field( ELSV, "INVALID")
    field( TVSV, "INVALID")
    field( TTSV, "INVALID")
    field( FTSV, "INVALID")
    field( FFSV, "INVALID")
    field( UNSV, "INVALID")
    field( IVOA, "Don't drive outputs")
    info(autosaveFields_pass0, "VAL")
}

record(mbbi, "$(P)RunMode-RB") {
    field( DTYP, "EVG SEQ RUN MODE")
    field( INP , "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")
    field( ZRST, "Normal")
    field( ONST, "Automatic")
    field( TWST, "Single")
    field( THSV, "INVALID")
    field( FRSV, "INVALID")
    field( FVSV, "INVALID")
    field( SXSV, "INVALID")
    field( SVSV, "INVALID")
    field( EISV, "INVALID")
    field( NISV, "INVALID")
    field( TESV, "INVALID")
    field( ELSV, "INVALID")
    field( TVSV, "INVALID")
    field( TTSV, "INVALID")
    field( FTSV, "INVALID")
    field( FFSV, "INVALID")
    field( UNSV, "INVALID")
}

record(mbbo, "$(P)TrigSrc-Sel") {
    field( DTYP, "EVG SEQ TRIG SRC")
    field( OUT , "#C$(cardNum) S$(seqNum) @")
    field( ZRST, "Mxc0")
    field( ONST, "Mxc1")
    field( TWST, "Mxc2")
    field( THST, "Mxc3")
    field( FRST, "Mxc4")
    field( FVST, "Mxc5")
    field( SXST, "Mxc6")
    field( SVST, "Mxc7")
    field( EIST, "AC")
    field( NIST, "SWT RAM0")
    field( TEST, "SWT RAM1")
    field( ZRVL, 0)
    field( ONVL, 1)
    field( TWVL, 2)
    field( THVL, 3)
    field( FRVL, 4)
    field( FVVL, 5)
    field( SXVL, 6)
    field( SVVL, 7)
    field( EIVL, 16)
    field( NIVL, 17)
    field( TEVL, 18)
    field( ELSV, "INVALID")
    field( TVSV, "INVALID")
    field( TTSV, "INVALID")
    field( FTSV, "INVALID")
    field( FFSV, "INVALID")
    field( UNSV, "INVALID")
    field( IVOA, "Don't drive outputs")
    info( autosaveFields_pass0, "VAL")
}

record(mbbi, "$(P)TrigSrc-RB") {
    field( DTYP, "EVG SEQ TRIG SRC")
    field( INP , "#C$(cardNum) S$(seqNum) @")
    field( UDF,  "0")
    field( SCAN, "I/O Intr")
    field( ZRST, "Mxc0")
    field( ONST, "Mxc1")
    field( TWST, "Mxc2")
    field( THST, "Mxc3")
    field( FRST, "Mxc4")
    field( FVST, "Mxc5")
    field( SXST, "Mxc6")
    field( SVST, "Mxc7")
    field( EIST, "AC")
    field( NIST, "SWT RAM0")
    field( TEST, "SWT RAM1")
    field( ZRVL, 0)
    field( ONVL, 1)
    field( TWVL, 2)
    field( THVL, 3)
    field( FRVL, 4)
    field( FVVL, 5)
    field( SXVL, 6)
    field( SVVL, 7)
    field( EIVL, 16)
    field( NIVL, 17)
    field( TEVL, 18)
    field( ELSV, "INVALID")
    field( TVSV, "INVALID")
    field( TTSV, "INVALID")
    field( FTSV, "INVALID")
    field( FFSV, "INVALID")
    field( UNSV, "INVALID")
}

record(bo, "$(P)Commit-Cmd") {
    field( DTYP, "EVG COMMIT SEQ")
    field( DESC, "Commit EVG Sequence")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "1")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
    field( FLNK, "$(P)LoadedSeq-RB")
}

record(bo, "$(P)Load-Cmd") {
    field( DTYP, "EVG LOAD SEQ")
    field( DESC, "ALLOC EVG Sequence")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "1")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
    field( FLNK, "$(P)LoadedSeq-RB")
}

record(bo, "$(P)Unload-Cmd") {
    field( DTYP, "EVG UNLOAD SEQ")
    field( DESC, "Dealloc EVG Sequence")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "0")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
    field( FLNK, "$(P)LoadedSeq-RB")
}

record(bo, "$(P)Enable-Cmd") {
    field( DTYP, "EVG ENABLE SEQ")
    field( DESC, "Enable EVG Sequence")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "1")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
}

record(bo, "$(P)Disable-Cmd") {
    field( DTYP, "EVG DISABLE SEQ")
    field( DESC, "Disable EVG Sequence")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "0")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
}

record(bo, "$(P)Abort-Cmd") {
    field( DTYP, "EVG ABORT SEQ")
    field( DESC, "Abort Sequence immediately")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "0")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
}

record(bo, "$(P)Pause-Cmd") {
    field( DTYP, "EVG PAUSE SEQ")
    field( DESC, "Pause Sequence immediately")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "0")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
}

record(bo, "$(P)SoftTrig-Sel") {
    field( DTYP, "EVG SOFT TRIG")
    field( DESC, "Sequence RAM soft trigger")
    field( OUT,  "#C$(cardNum) S$(seqNum) @")
    field( VAL,  "0")
    field( UDF,  "0")
    field( ZNAM, "0")
    field( ONAM, "1")
}

record(bi, "$(P)Load-RB") {
    field( DTYP, "EVG LOAD STATUS")
    field( DESC, "Soft Seq Load status")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")
    field( ZNAM, "Unloaded")
    field( ONAM, "Loaded")
    info( autosaveFields_pass0, "VAL")
}

record(bi, "$(P)Commit-RB") {
    field( DTYP, "EVG COMMIT STATUS")
    field( DESC, "Soft Seq Commit status")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")    
    field( ZNAM, "Uncommitted")
    field( ONAM, "Committed")
    info( autosaveFields_pass0, "VAL")
}

record(bi, "$(P)Enable-RB") {
    field( DTYP, "EVG ENA STATUS")
    field( DESC, "Soft Seq Ena status")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")    
    field( ZNAM, "Disabled")
    field( ONAM, "Enabled")
    info( autosaveFields_pass0, "VAL")
}

record(waveform, "$(P)LoadedSeq-RB") {
    field( DTYP, "EVG LOADED SEQ")
    field( DESC, "Soft Seqs Loaded in Rams")
    field( INP,  "#C$(cardNum) S @")
    field( NELM, "2")
    field( FTVL, "LONG")
}

record(stringin, "$(P)Error-RB") {
    field( DTYP, "EVG SEQ ERR")
    field( DESC, "Sequence error msg.")
    field( INP,  "#C$(cardNum) S$(seqNum) @")
    field( SCAN, "I/O Intr")
}


#
#Process Load-Cmd record if the sequence  was perviously in LOADED state
#

record(calcout, "$(P)Load-Calc_") {
    field( CALC, "A")
    field( INPA, "$(P)Load-RB NPP NMS")
    field( OOPT, "When Non-zero")
    field( OUT,  "$(P)Load-Cmd PP")
}

#
#Process Commit-Cmd record if the sequence was perviously in COMMITTED state
#

record(calcout, "$(P)Commit-Calc_") {
    field( CALC, "A")
    field( INPA, "$(P)Commit-RB NPP NMS")
    field( OOPT, "When Non-zero")
    field( OUT,  "$(P)Commit-Cmd PP")
}

#
#Process Enable-Cmd record if the sequence was perviously in ENABLED state
#

record(calcout, "$(P)Enable-Calc_") {
    field( CALC, "A")
    field( INPA, "$(P)Enable-RB NPP NMS")
    field( OOPT, "When Non-zero")
    field( OUT,  "$(P)Enable-Cmd PP")
}

record(fanout, "$(P)InitSeq-FOut_") {
    field( DESC, "Boot of sequence for sequencer")
    field( SELM, "All")
    field( PINI, "RUNNING")
    field( LNK1, "$(P)TsInpMode-Sel")
    field( LNK2, "$(P)EvtCode-SP")
    field( LNK3, "$(P)Timestamp-SP")
    field( LNK4, "$(P)RunMode-Sel")
    field( LNK5, "$(P)TrigSrc-Sel")
    field( LNK6, "$(P)InitSeq:Cont-FOut_")
}

record(fanout, "$(P)InitSeq:Cont-FOut_") {
    field( DESC, "Boot of sequence for sequencer")
    field( SELM, "All")
    field( LNK1, "$(P)Load-Calc_")
    field( LNK2, "$(P)Commit-Calc_")
    field( LNK3, "$(P)Enable-Calc_")
}

record(ai, "$(P)EvtClkFreq-RB_") {
    field( INP,  "$(P)EvtClkFreq-RB CP")
    field( FLNK, "$(P)Commit-Calc_")
}

