<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mrfioc2: mrfFracSynth.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mrfioc2
   &#160;<span id="projectnumber">2.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_94ff919899d933be1b6abb0111a41984.html">mrfCommon</a></li><li class="navelem"><a class="el" href="dir_e4b7bd9f3fd4bf82a843d00ee59380dd.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mrfFracSynth.c File Reference<div class="ingroups"><a class="el" href="group__mrf_common.html">MrfCommon</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Support routines for the Micrel SY87739L Fractional-N Synthesizer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;epicsTypes.h&gt;</code><br />
<code>#include &lt;iocsh.h&gt;</code><br />
<code>#include &lt;registryFunction.h&gt;</code><br />
<code>#include &lt;epicsExport.h&gt;</code><br />
<code>#include &lt;<a class="el" href="mrf_frac_synth_8h_source.html">mrfFracSynth.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mrf_common_8h_source.html">mrfCommon.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_print_8h_source.html">debugPrint.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mrfFracSynth.c:</div>
<div class="dyncontent">
<div class="center"><img src="mrf_frac_synth_8c__incl.png" border="0" usemap="#mrf_frac_synth_8c" alt=""/></div>
<map name="mrf_frac_synth_8c" id="mrf_frac_synth_8c">
<area shape="rect" id="node8" href="mrf_frac_synth_8h.html" title="mrfFracSynth.h" alt="" coords="328,80,448,107"/>
<area shape="rect" id="node10" href="mrf_common_8h.html" title="mrfCommon.h" alt="" coords="678,80,794,107"/>
<area shape="rect" id="node24" href="debug_print_8h.html" title="debugPrint.h" alt="" coords="5,80,109,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mrf_frac_synth_8c__dep__incl.png" border="0" usemap="#mrf_frac_synth_8cdep" alt=""/></div>
<map name="mrf_frac_synth_8cdep" id="mrf_frac_synth_8cdep">
<area shape="rect" id="node2" href="_frac_synth_analyze_8c.html" title="FracSynthAnalyze.c" alt="" coords="5,80,153,107"/>
<area shape="rect" id="node3" href="_frac_synth_control_word_8c.html" title="FracSynthControlWord.c" alt="" coords="178,80,354,107"/>
</map>
</div>
</div>
<p><a href="mrf_frac_synth_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_post_divide_struct.html">PostDivideStruct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_correction_struct.html">CorrectionStruct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_correction_val_struct.html">CorrectionValStruct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_frac_synth_components.html">FracSynthComponents</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad5aeca1a1a793c8ba18f85cbac89e768"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gad5aeca1a1a793c8ba18f85cbac89e768">DEBUG_PRINT</a>&#160;&#160;&#160;/* Debug printing always enabled for this module        */</td></tr>
<tr class="separator:gad5aeca1a1a793c8ba18f85cbac89e768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6af78dc3b0b89a75db6f2d59ab9589ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga6af78dc3b0b89a75db6f2d59ab9589ff">MAX_CORRECTION_RATIO</a>&#160;&#160;&#160;(17./14.)  /* Maximum value for correction term.                   */</td></tr>
<tr class="separator:ga6af78dc3b0b89a75db6f2d59ab9589ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32482de274074ad01b9ad07b5a77e6e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga32482de274074ad01b9ad07b5a77e6e2">MAX_VCO_FREQ</a>&#160;&#160;&#160;729.0    /* Maximum frequency for voltage-controlled oscillator  */</td></tr>
<tr class="separator:ga32482de274074ad01b9ad07b5a77e6e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4028643367a81118579bb9ff00dbb317"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga4028643367a81118579bb9ff00dbb317">MIN_VCO_FREQ</a>&#160;&#160;&#160;540.0    /* Minimum frequency for voltage-controlled oscillator  */</td></tr>
<tr class="separator:ga4028643367a81118579bb9ff00dbb317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0f6f780b72f7f28dde57624f5a1ef85"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gac0f6f780b72f7f28dde57624f5a1ef85">MIN_P_VALUE</a>&#160;&#160;&#160;17    /* Minimum val for integer part of fractional frequency */</td></tr>
<tr class="separator:gac0f6f780b72f7f28dde57624f5a1ef85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabef9b0318c864d32d39586183a047d94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gabef9b0318c864d32d39586183a047d94">MAX_FRAC_DIVISOR</a>&#160;&#160;&#160;31    /* Maximum divisor for fractional frequency value       */</td></tr>
<tr class="separator:gabef9b0318c864d32d39586183a047d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67676a1360dc48867462b00234056f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga67676a1360dc48867462b00234056f99">NUM_POST_DIVIDES</a>&#160;&#160;&#160;31    /* Number of unique post-divider values                 */</td></tr>
<tr class="separator:ga67676a1360dc48867462b00234056f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa60f29977f11d5548eb3f37f879e6fa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gaa60f29977f11d5548eb3f37f879e6fa2">NUM_POST_DIVIDE_VALS</a>&#160;&#160;&#160;32    /* Number of post-divider codes                         */</td></tr>
<tr class="separator:gaa60f29977f11d5548eb3f37f879e6fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga179cb66a9388422a1abb1514ab4dd468"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga179cb66a9388422a1abb1514ab4dd468">NUM_CORRECTIONS</a>&#160;&#160;&#160;23    /* Number of valid correction values (plus <a class="el" href="linkoptions_test_8c.html#a40086d8cf0e43ebc12c1b1a7fc81945d">one</a>)         */</td></tr>
<tr class="separator:ga179cb66a9388422a1abb1514ab4dd468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga241008895c5b58e27fbb669623ab28ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga241008895c5b58e27fbb669623ab28ce">NUM_CORRECTION_VALS</a>&#160;&#160;&#160;8    /* Number of correction value codes                     */</td></tr>
<tr class="separator:ga241008895c5b58e27fbb669623ab28ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c213cc89d01ec9cdbaa3356698a86ce"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga7c213cc89d01ec9cdbaa3356698a86ce">MAX_ERROR</a>&#160;&#160;&#160;100.0    /* Artifical error maximum                              */</td></tr>
<tr class="separator:ga7c213cc89d01ec9cdbaa3356698a86ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d288a400b18620bab417c0911c78811"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga0d288a400b18620bab417c0911c78811">ZERO_THRESHOLD</a>&#160;&#160;&#160;1.0e-9    /* Floating point threshold for zero detection          */</td></tr>
<tr class="separator:ga0d288a400b18620bab417c0911c78811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2bb44bef96ff160997daa91687a515d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gab2bb44bef96ff160997daa91687a515d">CONTROL_MDIV_BITS</a>&#160;&#160;&#160;3        /* Denominator of correction term                       */</td></tr>
<tr class="separator:gab2bb44bef96ff160997daa91687a515d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89304adb8322c6e4d302c71736a8aa8f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga89304adb8322c6e4d302c71736a8aa8f">CONTROL_NDIV_BITS</a>&#160;&#160;&#160;3        /* Numerator of correction term                         */</td></tr>
<tr class="separator:ga89304adb8322c6e4d302c71736a8aa8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90f7bbc44c6e83fcc818895b327dad16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga90f7bbc44c6e83fcc818895b327dad16">CONTROL_POSTDIV_BITS</a>&#160;&#160;&#160;5        /* Post-Divider                                         */</td></tr>
<tr class="separator:ga90f7bbc44c6e83fcc818895b327dad16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeeaa4722266f828575690b7a8198f06b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gaeeaa4722266f828575690b7a8198f06b">CONTROL_MFG_BITS</a>&#160;&#160;&#160;3        /* Must Be Zero                                         */</td></tr>
<tr class="separator:gaeeaa4722266f828575690b7a8198f06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f2ba38e0b428ad44e34bdeb86997c6c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga4f2ba38e0b428ad44e34bdeb86997c6c">CONTROL_P_BITS</a>&#160;&#160;&#160;4        /* Integer part of fractional frequency                 */</td></tr>
<tr class="separator:ga4f2ba38e0b428ad44e34bdeb86997c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f1d33a3b66de0af022d7220744730c2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga6f1d33a3b66de0af022d7220744730c2">CONTROL_QPM1_BITS</a>&#160;&#160;&#160;5        /* Value for Q(p-1) term of fractional frequency        */</td></tr>
<tr class="separator:ga6f1d33a3b66de0af022d7220744730c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bf644316e534d1809d5f34e64fa82b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga2bf644316e534d1809d5f34e64fa82b4">CONTROL_QP_BITS</a>&#160;&#160;&#160;5        /* Value for Q(p) term of fractional frequency          */</td></tr>
<tr class="separator:ga2bf644316e534d1809d5f34e64fa82b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb0fbea34f8af60d31e21e38fdecc179"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gacb0fbea34f8af60d31e21e38fdecc179">CONTROL_PREAMBLE_BITS</a>&#160;&#160;&#160;4        /* Must Be Zero                                         */</td></tr>
<tr class="separator:gacb0fbea34f8af60d31e21e38fdecc179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10b8efb38f7365a86997b787e987a8f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga10b8efb38f7365a86997b787e987a8f8">CONTROL_MDIV_SHIFT</a>&#160;&#160;&#160;0        /* Denominator of correction term                       */</td></tr>
<tr class="separator:ga10b8efb38f7365a86997b787e987a8f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a6eeeaab8ad2d1f6c4f9faeab9c38d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga8a6eeeaab8ad2d1f6c4f9faeab9c38d5">CONTROL_NDIV_SHIFT</a>&#160;&#160;&#160;3        /* Numerator of correction term                         */</td></tr>
<tr class="separator:ga8a6eeeaab8ad2d1f6c4f9faeab9c38d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb1acce6b2bea3fdb69992bf9af6e249"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gabb1acce6b2bea3fdb69992bf9af6e249">CONTROL_POSTDIV_SHIFT</a>&#160;&#160;&#160;6        /* Post-Divider                                         */</td></tr>
<tr class="separator:gabb1acce6b2bea3fdb69992bf9af6e249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80f7bbc9ef9ca7e45e6f2c050528af6b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga80f7bbc9ef9ca7e45e6f2c050528af6b">CONTROL_MFG_SHIFT</a>&#160;&#160;&#160;11        /* Must Be Zero                                         */</td></tr>
<tr class="separator:ga80f7bbc9ef9ca7e45e6f2c050528af6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaecc281ac9a85b842baef7f0e3d9ad5fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gaecc281ac9a85b842baef7f0e3d9ad5fe">CONTROL_P_SHIFT</a>&#160;&#160;&#160;14        /* Integer part of fractional frequency                 */</td></tr>
<tr class="separator:gaecc281ac9a85b842baef7f0e3d9ad5fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49ab24588b7ce39f2d8f6bdd89898324"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga49ab24588b7ce39f2d8f6bdd89898324">CONTROL_QPM1_SHIFT</a>&#160;&#160;&#160;18        /* Value for Q(p-1) term of fractional frequency        */</td></tr>
<tr class="separator:ga49ab24588b7ce39f2d8f6bdd89898324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f146a143e408be0fc1f3cfe933aada2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga5f146a143e408be0fc1f3cfe933aada2">CONTROL_QP_SHIFT</a>&#160;&#160;&#160;23        /* Value for Q(p) term of fractional frequency          */</td></tr>
<tr class="separator:ga5f146a143e408be0fc1f3cfe933aada2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e59d92df51ad3f1edeb63822c2b4dfc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga9e59d92df51ad3f1edeb63822c2b4dfc">CONTROL_PREAMBLE_SHIFT</a>&#160;&#160;&#160;28        /* Must Be Zero                                         */</td></tr>
<tr class="separator:ga9e59d92df51ad3f1edeb63822c2b4dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad90524aaa3787cca45eafcb147cb4346"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gad90524aaa3787cca45eafcb147cb4346">CONTROL_MDIV_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#gab2bb44bef96ff160997daa91687a515d">CONTROL_MDIV_BITS</a>)     - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#ga10b8efb38f7365a86997b787e987a8f8">CONTROL_MDIV_SHIFT</a>)</td></tr>
<tr class="separator:gad90524aaa3787cca45eafcb147cb4346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae735d7fd3e8f4981dbb3bd337df282f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gae735d7fd3e8f4981dbb3bd337df282f5">CONTROL_NDIV_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#ga89304adb8322c6e4d302c71736a8aa8f">CONTROL_NDIV_BITS</a>)     - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#ga8a6eeeaab8ad2d1f6c4f9faeab9c38d5">CONTROL_NDIV_SHIFT</a>)</td></tr>
<tr class="separator:gae735d7fd3e8f4981dbb3bd337df282f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2353751d1a178b2f08a5444c176ba82b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga2353751d1a178b2f08a5444c176ba82b">CONTROL_POSTDIV_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#ga90f7bbc44c6e83fcc818895b327dad16">CONTROL_POSTDIV_BITS</a>)  - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#gabb1acce6b2bea3fdb69992bf9af6e249">CONTROL_POSTDIV_SHIFT</a>)</td></tr>
<tr class="separator:ga2353751d1a178b2f08a5444c176ba82b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga117a878f86422dd7e98fbeb5958592d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga117a878f86422dd7e98fbeb5958592d3">CONTROL_MFG_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#gaeeaa4722266f828575690b7a8198f06b">CONTROL_MFG_BITS</a>)      - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#ga80f7bbc9ef9ca7e45e6f2c050528af6b">CONTROL_MFG_SHIFT</a>)</td></tr>
<tr class="separator:ga117a878f86422dd7e98fbeb5958592d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90fd6e42e0570a89df2d2395999befd7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga90fd6e42e0570a89df2d2395999befd7">CONTROL_P_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#ga4f2ba38e0b428ad44e34bdeb86997c6c">CONTROL_P_BITS</a>)        - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#gaecc281ac9a85b842baef7f0e3d9ad5fe">CONTROL_P_SHIFT</a>)</td></tr>
<tr class="separator:ga90fd6e42e0570a89df2d2395999befd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga194fca1519e1b595ac435efc2139cbc6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga194fca1519e1b595ac435efc2139cbc6">CONTROL_QPM1_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#ga6f1d33a3b66de0af022d7220744730c2">CONTROL_QPM1_BITS</a>)     - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#ga49ab24588b7ce39f2d8f6bdd89898324">CONTROL_QPM1_SHIFT</a>)</td></tr>
<tr class="separator:ga194fca1519e1b595ac435efc2139cbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaced1549e7d5fa7b5e09eda9aea9f51da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gaced1549e7d5fa7b5e09eda9aea9f51da">CONTROL_QP_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#ga2bf644316e534d1809d5f34e64fa82b4">CONTROL_QP_BITS</a>)       - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#ga5f146a143e408be0fc1f3cfe933aada2">CONTROL_QP_SHIFT</a>)</td></tr>
<tr class="separator:gaced1549e7d5fa7b5e09eda9aea9f51da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89aacdb8108467e0ed6c4d30d5cd564c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga89aacdb8108467e0ed6c4d30d5cd564c">CONTROL_PREAMBLE_MASK</a>&#160;&#160;&#160;(((1 &lt;&lt; <a class="el" href="group__mrf_common.html#gacb0fbea34f8af60d31e21e38fdecc179">CONTROL_PREAMBLE_BITS</a>) - 1) &lt;&lt; <a class="el" href="group__mrf_common.html#ga9e59d92df51ad3f1edeb63822c2b4dfc">CONTROL_PREAMBLE_SHIFT</a>)</td></tr>
<tr class="separator:ga89aacdb8108467e0ed6c4d30d5cd564c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83d4b245bfc745625931be5e5c180bd8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga83d4b245bfc745625931be5e5c180bd8">CORRECTION_DIV_14</a>&#160;&#160;&#160;5       /* Numerator or denominator of 14                        */</td></tr>
<tr class="separator:ga83d4b245bfc745625931be5e5c180bd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab28c05ad71e7092b09d3adfc9d18b580"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gab28c05ad71e7092b09d3adfc9d18b580">CORRECTION_DIV_15</a>&#160;&#160;&#160;7       /* Numerator or denominator of 15                        */</td></tr>
<tr class="separator:gab28c05ad71e7092b09d3adfc9d18b580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47a5cefce74a8ed04e6594f23c96db12"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga47a5cefce74a8ed04e6594f23c96db12">CORRECTION_DIV_16</a>&#160;&#160;&#160;1       /* Numerator or denominator of 16                        */</td></tr>
<tr class="separator:ga47a5cefce74a8ed04e6594f23c96db12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a4417ab2fd5038ec86ed433b20c39ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga9a4417ab2fd5038ec86ed433b20c39ec">CORRECTION_DIV_17</a>&#160;&#160;&#160;3       /* Numerator or denominator of 17                        */</td></tr>
<tr class="separator:ga9a4417ab2fd5038ec86ed433b20c39ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac43f6b768ccdb9edfb617224fda9e029"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gac43f6b768ccdb9edfb617224fda9e029">CORRECTION_DIV_18</a>&#160;&#160;&#160;2       /* Numerator or denominator of 18                        */</td></tr>
<tr class="separator:gac43f6b768ccdb9edfb617224fda9e029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62680d342851a06998f6006d03f59335"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga62680d342851a06998f6006d03f59335">CORRECTION_DIV_31</a>&#160;&#160;&#160;4       /* Numerator or denominator of 31                        */</td></tr>
<tr class="separator:ga62680d342851a06998f6006d03f59335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga899d87654c8f053f636c88d46feb417b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga899d87654c8f053f636c88d46feb417b">CORRECTION_DIV_32</a>&#160;&#160;&#160;6       /* Numerator or denominator of 32                        */</td></tr>
<tr class="separator:ga899d87654c8f053f636c88d46feb417b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae10824b00b8a005d97c74a11cdc9922b"><td class="memItemLeft" align="right" valign="top">epicsShareExtern epicsStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gae10824b00b8a005d97c74a11cdc9922b">mrfSetEventClockSpeed</a> (epicsFloat64 InputClockSpeed, epicsUInt32 InputControlWord, epicsFloat64 ReferenceFreq, epicsFloat64 *OutputClockSpeed, epicsUInt32 *OutputControlWord, epicsInt32 PrintFlag)</td></tr>
<tr class="separator:gae10824b00b8a005d97c74a11cdc9922b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae361c0306ceb8ef7701c8bff663c56e3"><td class="memItemLeft" align="right" valign="top">epicsShareExtern epicsUInt32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#gae361c0306ceb8ef7701c8bff663c56e3">FracSynthControlWord</a> (epicsFloat64 DesiredFreq, epicsFloat64 ReferenceFreq, epicsInt32 debugFlag, epicsFloat64 *Error)</td></tr>
<tr class="separator:gae361c0306ceb8ef7701c8bff663c56e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42a0aecda942f6b758fbace9d8b3cdaa"><td class="memItemLeft" align="right" valign="top">epicsShareExtern epicsFloat64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga42a0aecda942f6b758fbace9d8b3cdaa">FracSynthAnalyze</a> (epicsUInt32 ControlWord, epicsFloat64 ReferenceFreq, epicsInt32 PrintFlag)</td></tr>
<tr class="separator:ga42a0aecda942f6b758fbace9d8b3cdaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21f70b7c926c618d86b7320e33d15e66"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrf_common.html#ga21f70b7c926c618d86b7320e33d15e66">epicsExportRegistrar</a> (FracSynthRegistrar)</td></tr>
<tr class="separator:ga21f70b7c926c618d86b7320e33d15e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support routines for the Micrel SY87739L Fractional-N Synthesizer. </p>
<p>This module contains routines to create and analyze the control word for the Micrel SY87739L Fractional-N synthesizer chip. This chip is used in the MRF Series-200 event receiver cards to synchronize with the expected event clock frequency. It is also in the event generator card where it can be used to generate the event clock in the absence of an RF source.</p>
<p>Three routines are provided in this module:</p>
<ul>
<li><em>mrfSetEventClockSpeed</em> - Determines the event clock speed and/or the fractional synthesizer control word given the knowledge of one or the other of these paramters.</li>
<li><em>FracSynthControlWord</em> - Creates an SY87739L control word which will generate the desired frequency from the specified reference frequency. If it can not generate the desired frequency exactly, it will generate a frequency as close to the desired frequency as it can. The routine will return the "error" (expressed in parts-per-million) between the desired and generated frequencies. For the MRF Series-2xx event system, the error must be below +/- 100 ppm.</li>
<li><em>FracSynthAnalyze</em> - Examines the specified SY87739L control word and returns the output frequency that will be generated given the specified reference frequency. Depending on the value of the "PrintFlag" parameter, it will also display the values of the control word fields and how the output frequency is created from them. It will also analyze the control word for programming errors.</li>
</ul>
<p>For convenience, this module also defines EPICS IOC Shell versions of the "FracSynth" routines. The IOC Shell versions only take the first argument. The reference frequency defaults to the MRF input reference frequency (24 MHz) and the debugFlag/PrintFlag are defaulted to produce the maximum amount of printed output.</p>
<dl class="section note"><dt>Note</dt><dd>For the MRF Series-2xx cards, the input reference frequency is 24 Mhz.</dd>
<dd>
To use the EPICS IOC shell definitions, the "Data Base Definition" (dbd) file should include the line:<br />
 <em>"registrar(FracSynthRegistrar)"</em> </dd>
<dd>
These routines are not suitable for calling from the vxWorks shell as they require floating point input. </dd></dl>

<p class="definition">Definition in file <a class="el" href="mrf_frac_synth_8c_source.html">mrfFracSynth.c</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 22 2023 08:45:38 for mrfioc2 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
