<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mrfioc2: TimeStampSource Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mrfioc2
   &#160;<span id="projectnumber">2.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_time_stamp_source-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TimeStampSource Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mrmtimesrc_8h_source.html">mrmtimesrc.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for TimeStampSource:</div>
<div class="dyncontent">
<div class="center"><img src="class_time_stamp_source__inherit__graph.png" border="0" usemap="#_time_stamp_source_inherit__map" alt="Inheritance graph"/></div>
<map name="_time_stamp_source_inherit__map" id="_time_stamp_source_inherit__map">
<area shape="rect" id="node2" href="classevg_mrm.html" title="evgMrm" alt="" coords="5,80,80,107"/>
<area shape="rect" id="node3" href="class_e_v_r_m_r_m.html" title="Modular Register Map Event Receivers. " alt="" coords="105,80,183,107"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_time_stamp_source_1_1_impl.html">Impl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6548e7893ba66a644dae039f766e8eac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a6548e7893ba66a644dae039f766e8eac">TimeStampSource</a> (double period)</td></tr>
<tr class="separator:a6548e7893ba66a644dae039f766e8eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdfd11a9bb0aa5495edbe0e9d82877eb"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#abdfd11a9bb0aa5495edbe0e9d82877eb">~TimeStampSource</a> ()</td></tr>
<tr class="separator:abdfd11a9bb0aa5495edbe0e9d82877eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0573d5da29f39c52935cc28ceff9fe5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#ac0573d5da29f39c52935cc28ceff9fe5">resyncSecond</a> ()</td></tr>
<tr class="memdesc:ac0573d5da29f39c52935cc28ceff9fe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call to re-initialize timestamp counter from system time.  <a href="#ac0573d5da29f39c52935cc28ceff9fe5">More...</a><br /></td></tr>
<tr class="separator:ac0573d5da29f39c52935cc28ceff9fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6deca6cd18b725e2bcc2ccacf6319df7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a6deca6cd18b725e2bcc2ccacf6319df7">tickSecond</a> ()</td></tr>
<tr class="memdesc:a6deca6cd18b725e2bcc2ccacf6319df7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call just after the start of each second.  <a href="#a6deca6cd18b725e2bcc2ccacf6319df7">More...</a><br /></td></tr>
<tr class="separator:a6deca6cd18b725e2bcc2ccacf6319df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae8c88fbe18a770df57b6c68fa37464a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#aae8c88fbe18a770df57b6c68fa37464a">validSeconds</a> () const</td></tr>
<tr class="memdesc:aae8c88fbe18a770df57b6c68fa37464a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether <a class="el" href="class_time_stamp_source.html#a6deca6cd18b725e2bcc2ccacf6319df7" title="Call just after the start of each second. ">tickSecond()</a> has been called for the past 5 seconds.  <a href="#aae8c88fbe18a770df57b6c68fa37464a">More...</a><br /></td></tr>
<tr class="separator:aae8c88fbe18a770df57b6c68fa37464a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf5d09a4779bce1e53661b603aabb79"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a4bf5d09a4779bce1e53661b603aabb79">deltaSeconds</a> () const</td></tr>
<tr class="memdesc:a4bf5d09a4779bce1e53661b603aabb79"><td class="mdescLeft">&#160;</td><td class="mdescRight">last difference between  <a href="#a4bf5d09a4779bce1e53661b603aabb79">More...</a><br /></td></tr>
<tr class="separator:a4bf5d09a4779bce1e53661b603aabb79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10acc0050c9b108ed2b79a37dc14e519"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a10acc0050c9b108ed2b79a37dc14e519">softSecondsSrc</a> (bool enable)</td></tr>
<tr class="memdesc:a10acc0050c9b108ed2b79a37dc14e519"><td class="mdescLeft">&#160;</td><td class="mdescRight">enable sending of event 125 by software timer. Simulation of external HW clock  <a href="#a10acc0050c9b108ed2b79a37dc14e519">More...</a><br /></td></tr>
<tr class="separator:a10acc0050c9b108ed2b79a37dc14e519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08a6fb528867279a3aca920c82a8b989"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a08a6fb528867279a3aca920c82a8b989">isSoftSeconds</a> () const</td></tr>
<tr class="separator:a08a6fb528867279a3aca920c82a8b989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0264116bdf1fbb6f4b152424bd57ee87"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a0264116bdf1fbb6f4b152424bd57ee87">nextSecond</a> () const</td></tr>
<tr class="separator:a0264116bdf1fbb6f4b152424bd57ee87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a13c0b3bdcdcbdaeb53261938445bd03c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a13c0b3bdcdcbdaeb53261938445bd03c">setEvtCode</a> (epicsUInt32 evtCode)=0</td></tr>
<tr class="separator:a13c0b3bdcdcbdaeb53261938445bd03c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907433fbcc31a71c48a5f48af8f327f1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_time_stamp_source.html#a907433fbcc31a71c48a5f48af8f327f1">postSoftSecondsSrc</a> ()</td></tr>
<tr class="separator:a907433fbcc31a71c48a5f48af8f327f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8h_source.html#l00016">16</a> of file <a class="el" href="mrmtimesrc_8h_source.html">mrmtimesrc.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6548e7893ba66a644dae039f766e8eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6548e7893ba66a644dae039f766e8eac">&#9670;&nbsp;</a></span>TimeStampSource()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TimeStampSource::TimeStampSource </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>period</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00143">143</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    :impl(<span class="keyword">new</span> Impl(<span class="keyword">this</span>, period))</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="class_time_stamp_source.html#ac0573d5da29f39c52935cc28ceff9fe5">resyncSecond</a>();</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="class_time_stamp_source_html_ac0573d5da29f39c52935cc28ceff9fe5"><div class="ttname"><a href="class_time_stamp_source.html#ac0573d5da29f39c52935cc28ceff9fe5">TimeStampSource::resyncSecond</a></div><div class="ttdeci">void resyncSecond()</div><div class="ttdoc">Call to re-initialize timestamp counter from system time. </div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00154">mrmtimesrc.cpp:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abdfd11a9bb0aa5495edbe0e9d82877eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdfd11a9bb0aa5495edbe0e9d82877eb">&#9670;&nbsp;</a></span>~TimeStampSource()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TimeStampSource::~TimeStampSource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00149">149</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">delete</span> impl;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4bf5d09a4779bce1e53661b603aabb79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bf5d09a4779bce1e53661b603aabb79">&#9670;&nbsp;</a></span>deltaSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double TimeStampSource::deltaSeconds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>last difference between </p>

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00224">224</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a818c328a35dcc96c4698f8def30550f3">lastError</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_a818c328a35dcc96c4698f8def30550f3"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#a818c328a35dcc96c4698f8def30550f3">TimeStampSource::Impl::lastError</a></div><div class="ttdeci">double lastError</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00137">mrmtimesrc.cpp:137</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a08a6fb528867279a3aca920c82a8b989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08a6fb528867279a3aca920c82a8b989">&#9670;&nbsp;</a></span>isSoftSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TimeStampSource::isSoftSeconds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00263">263</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;{</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#ifdef HAVE_CNS</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> !!impl-&gt;softsrc.get();</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0264116bdf1fbb6f4b152424bd57ee87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0264116bdf1fbb6f4b152424bd57ee87">&#9670;&nbsp;</a></span>nextSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string TimeStampSource::nextSecond </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00273">273</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    epicsTimeStamp raw;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        raw.secPastEpoch = impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#aa9cdef009cc0bebd97eecb01590db1ea">next</a> - POSIX_TIME_AT_EPICS_EPOCH;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        raw.nsec = 0;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    epicsTime time(raw);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    std::vector&lt;char&gt; buf(40);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    buf.resize(time.strftime(&amp;buf[0], buf.size(), <span class="stringliteral">&quot;%a, %d %b %Y %H:%M:%S&quot;</span>));</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// buf.size() doesn&#39;t include trailing nil</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> std::string(&amp;buf[0], buf.size());</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_aa9cdef009cc0bebd97eecb01590db1ea"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#aa9cdef009cc0bebd97eecb01590db1ea">TimeStampSource::Impl::next</a></div><div class="ttdeci">epicsUInt32 next</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00140">mrmtimesrc.cpp:140</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a907433fbcc31a71c48a5f48af8f327f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a907433fbcc31a71c48a5f48af8f327f1">&#9670;&nbsp;</a></span>postSoftSecondsSrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void TimeStampSource::postSoftSecondsSrc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classevg_mrm.html#a227cf1c1d16c0630400c3a90136fb696">evgMrm</a>.</p>

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8h_source.html#l00045">45</a> of file <a class="el" href="mrmtimesrc_8h_source.html">mrmtimesrc.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{<a class="code" href="class_time_stamp_source.html#a6deca6cd18b725e2bcc2ccacf6319df7">tickSecond</a>();}</div><div class="ttc" id="class_time_stamp_source_html_a6deca6cd18b725e2bcc2ccacf6319df7"><div class="ttname"><a href="class_time_stamp_source.html#a6deca6cd18b725e2bcc2ccacf6319df7">TimeStampSource::tickSecond</a></div><div class="ttdeci">void tickSecond()</div><div class="ttdoc">Call just after the start of each second. </div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00160">mrmtimesrc.cpp:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0573d5da29f39c52935cc28ceff9fe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0573d5da29f39c52935cc28ceff9fe5">&#9670;&nbsp;</a></span>resyncSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TimeStampSource::resyncSecond </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call to re-initialize timestamp counter from system time. </p>

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00154">154</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a8d1313ef0cd8bdf97af9d6f9cd705774">resync</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_a8d1313ef0cd8bdf97af9d6f9cd705774"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#a8d1313ef0cd8bdf97af9d6f9cd705774">TimeStampSource::Impl::resync</a></div><div class="ttdeci">bool resync</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00135">mrmtimesrc.cpp:135</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13c0b3bdcdcbdaeb53261938445bd03c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c0b3bdcdcbdaeb53261938445bd03c">&#9670;&nbsp;</a></span>setEvtCode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void TimeStampSource::setEvtCode </td>
          <td>(</td>
          <td class="paramtype">epicsUInt32&#160;</td>
          <td class="paramname"><em>evtCode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="class_e_v_r_m_r_m.html#a0497b49fc2dc3598fcd57202d0e7622f">EVRMRM</a>, and <a class="el" href="classevg_mrm.html#a53aca387c07f82f9ac410d2359b57c42">evgMrm</a>.</p>

</div>
</div>
<a id="a10acc0050c9b108ed2b79a37dc14e519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10acc0050c9b108ed2b79a37dc14e519">&#9670;&nbsp;</a></span>softSecondsSrc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TimeStampSource::softSecondsSrc </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enable sending of event 125 by software timer. Simulation of external HW clock </p>

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00231">231</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#ifdef HAVE_CNS</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    mrf::auto_ptr&lt;epicsThread&gt; cleanup;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">if</span>(enable &amp;&amp; !impl-&gt;softsrc.get()) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">// start it</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            impl-&gt;stopsrc = <span class="keyword">false</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            impl-&gt;softsrc.reset(<span class="keyword">new</span> epicsThread(impl-&gt;softsrcRun,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                                <span class="stringliteral">&quot;SoftTimeSrc&quot;</span>,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                                epicsThreadGetStackSize(epicsThreadStackSmall),</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                                epicsThreadPriorityHigh));</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            impl-&gt;softsrc-&gt;start();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="class_time_stamp_source.html#ac0573d5da29f39c52935cc28ceff9fe5">resyncSecond</a>();</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!enable &amp;&amp; impl-&gt;softsrc.get()) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            impl-&gt;stopsrc = <span class="keyword">true</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            cleanup = PTRMOVE(impl-&gt;softsrc);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span>(cleanup.get()) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ac3fe362a39c3505a9617fd9a3d3059a4">wakeup</a>.signal();</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        cleanup-&gt;exitWait();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span>(enable)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Soft timestamp source not supported&quot;</span>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="class_time_stamp_source_html_ac0573d5da29f39c52935cc28ceff9fe5"><div class="ttname"><a href="class_time_stamp_source.html#ac0573d5da29f39c52935cc28ceff9fe5">TimeStampSource::resyncSecond</a></div><div class="ttdeci">void resyncSecond()</div><div class="ttdoc">Call to re-initialize timestamp counter from system time. </div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00154">mrmtimesrc.cpp:154</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ac3fe362a39c3505a9617fd9a3d3059a4"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ac3fe362a39c3505a9617fd9a3d3059a4">TimeStampSource::Impl::wakeup</a></div><div class="ttdeci">epicsEvent wakeup</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00123">mrmtimesrc.cpp:123</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6deca6cd18b725e2bcc2ccacf6319df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6deca6cd18b725e2bcc2ccacf6319df7">&#9670;&nbsp;</a></span>tickSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TimeStampSource::tickSecond </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call just after the start of each second. </p>

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00160">160</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    epicsUInt32 tosend=0;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">bool</span> ok;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    epicsTimeStamp ts;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">bool</span> valid = epicsTimeOK == generalTimeGetExceptPriority(&amp;ts, 0, <a class="code" href="mrf_common_8h.html#a86d07238267cfd883f283132fa48012b">ER_PROVIDER_PRIORITY</a>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        ok = impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#aeab24f09fa56e74eb5df960560bab419">okCnt</a>&gt;=5;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">/* delay re-sync request until 1Hz is stable, valid system time is available */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span>(ok &amp;&amp; valid &amp;&amp; impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a8d1313ef0cd8bdf97af9d6f9cd705774">resync</a>)  {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#aa9cdef009cc0bebd97eecb01590db1ea">next</a> = ts.secPastEpoch+POSIX_TIME_AT_EPICS_EPOCH+1;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a8d1313ef0cd8bdf97af9d6f9cd705774">resync</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span>(ok) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            tosend = impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#aa9cdef009cc0bebd97eecb01590db1ea">next</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#aa9cdef009cc0bebd97eecb01590db1ea">next</a>++;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        ok &amp;= tosend!=0;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span>(ok &amp;&amp; valid) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a818c328a35dcc96c4698f8def30550f3">lastError</a> = double(tosend) - (ts.secPastEpoch+POSIX_TIME_AT_EPICS_EPOCH);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a818c328a35dcc96c4698f8def30550f3">lastError</a> = -1.0;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span>(!impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a36e24e8424924d46db99e1e891b6b65b">timeout</a>.get()) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="comment">// lazy start of timestamp timeout thread</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a36e24e8424924d46db99e1e891b6b65b">timeout</a>.reset(<span class="keyword">new</span> epicsThread(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a16a9238cd87407d06f1b19522c640719">timeoutRun</a>,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                                <span class="stringliteral">&quot;TimeStampTimeout&quot;</span>,</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                                epicsThreadGetStackSize(epicsThreadStackSmall)));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#a36e24e8424924d46db99e1e891b6b65b">timeout</a>-&gt;start();</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ac3fe362a39c3505a9617fd9a3d3059a4">wakeup</a>.signal();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>(!ok) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i = 0; i &lt; 32; tosend &lt;&lt;= 1, i++) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">try</span> {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">if</span>( tosend &amp; 0x80000000 )</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                <a class="code" href="class_time_stamp_source.html#a13c0b3bdcdcbdaeb53261938445bd03c">setEvtCode</a>(<a class="code" href="mrf_common_8h.html#a92aecd8a9236ebe6e0e89b8f1751bc42">MRF_EVENT_TS_SHIFT_1</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <a class="code" href="class_time_stamp_source.html#a13c0b3bdcdcbdaeb53261938445bd03c">setEvtCode</a>(<a class="code" href="mrf_common_8h.html#ab8a7029aa2be3904e3373548a65df4d9">MRF_EVENT_TS_SHIFT_0</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        }<span class="keywordflow">catch</span>(std::exception&amp; e){</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            errlogPrintf(<span class="stringliteral">&quot;Soft timestamp source can&#39;t send shift event: %s\n&quot;</span>, e.what());</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_a818c328a35dcc96c4698f8def30550f3"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#a818c328a35dcc96c4698f8def30550f3">TimeStampSource::Impl::lastError</a></div><div class="ttdeci">double lastError</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00137">mrmtimesrc.cpp:137</a></div></div>
<div class="ttc" id="class_time_stamp_source_html_a13c0b3bdcdcbdaeb53261938445bd03c"><div class="ttname"><a href="class_time_stamp_source.html#a13c0b3bdcdcbdaeb53261938445bd03c">TimeStampSource::setEvtCode</a></div><div class="ttdeci">virtual void setEvtCode(epicsUInt32 evtCode)=0</div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_a36e24e8424924d46db99e1e891b6b65b"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#a36e24e8424924d46db99e1e891b6b65b">TimeStampSource::Impl::timeout</a></div><div class="ttdeci">mrf::auto_ptr&lt; epicsThread &gt; timeout</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00125">mrmtimesrc.cpp:125</a></div></div>
<div class="ttc" id="mrf_common_8h_html_ab8a7029aa2be3904e3373548a65df4d9"><div class="ttname"><a href="mrf_common_8h.html#ab8a7029aa2be3904e3373548a65df4d9">MRF_EVENT_TS_SHIFT_0</a></div><div class="ttdeci">#define MRF_EVENT_TS_SHIFT_0</div><div class="ttdef"><b>Definition:</b> <a href="mrf_common_8h_source.html#l00113">mrfCommon.h:113</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_a8d1313ef0cd8bdf97af9d6f9cd705774"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#a8d1313ef0cd8bdf97af9d6f9cd705774">TimeStampSource::Impl::resync</a></div><div class="ttdeci">bool resync</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00135">mrmtimesrc.cpp:135</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_aeab24f09fa56e74eb5df960560bab419"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#aeab24f09fa56e74eb5df960560bab419">TimeStampSource::Impl::okCnt</a></div><div class="ttdeci">unsigned okCnt</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00136">mrmtimesrc.cpp:136</a></div></div>
<div class="ttc" id="mrf_common_8h_html_a92aecd8a9236ebe6e0e89b8f1751bc42"><div class="ttname"><a href="mrf_common_8h.html#a92aecd8a9236ebe6e0e89b8f1751bc42">MRF_EVENT_TS_SHIFT_1</a></div><div class="ttdeci">#define MRF_EVENT_TS_SHIFT_1</div><div class="ttdef"><b>Definition:</b> <a href="mrf_common_8h_source.html#l00114">mrfCommon.h:114</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ac3fe362a39c3505a9617fd9a3d3059a4"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ac3fe362a39c3505a9617fd9a3d3059a4">TimeStampSource::Impl::wakeup</a></div><div class="ttdeci">epicsEvent wakeup</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00123">mrmtimesrc.cpp:123</a></div></div>
<div class="ttc" id="mrf_common_8h_html_a86d07238267cfd883f283132fa48012b"><div class="ttname"><a href="mrf_common_8h.html#a86d07238267cfd883f283132fa48012b">ER_PROVIDER_PRIORITY</a></div><div class="ttdeci">#define ER_PROVIDER_PRIORITY</div><div class="ttdoc">Priority given to EVR&amp;#39;s timestamp/event provider. </div><div class="ttdef"><b>Definition:</b> <a href="mrf_common_8h_source.html#l00131">mrfCommon.h:131</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_aa9cdef009cc0bebd97eecb01590db1ea"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#aa9cdef009cc0bebd97eecb01590db1ea">TimeStampSource::Impl::next</a></div><div class="ttdeci">epicsUInt32 next</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00140">mrmtimesrc.cpp:140</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_a16a9238cd87407d06f1b19522c640719"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#a16a9238cd87407d06f1b19522c640719">TimeStampSource::Impl::timeoutRun</a></div><div class="ttdeci">epicsThreadRunableMethod&lt; Impl, &amp;Impl::runTimeout &gt; timeoutRun</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00124">mrmtimesrc.cpp:124</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aae8c88fbe18a770df57b6c68fa37464a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8c88fbe18a770df57b6c68fa37464a">&#9670;&nbsp;</a></span>validSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TimeStampSource::validSeconds </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether <a class="el" href="class_time_stamp_source.html#a6deca6cd18b725e2bcc2ccacf6319df7" title="Call just after the start of each second. ">tickSecond()</a> has been called for the past 5 seconds. </p>

<p class="definition">Definition at line <a class="el" href="mrmtimesrc_8cpp_source.html#l00218">218</a> of file <a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;{</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a> G(impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">mutex</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> impl-&gt;<a class="code" href="struct_time_stamp_source_1_1_impl.html#aeab24f09fa56e74eb5df960560bab419">okCnt</a>&gt;=5;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="struct_time_stamp_source_1_1_impl_html_ab987c955dfcc111885da338468bacc40"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#ab987c955dfcc111885da338468bacc40">TimeStampSource::Impl::mutex</a></div><div class="ttdeci">epicsMutex mutex</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00122">mrmtimesrc.cpp:122</a></div></div>
<div class="ttc" id="struct_time_stamp_source_1_1_impl_html_aeab24f09fa56e74eb5df960560bab419"><div class="ttname"><a href="struct_time_stamp_source_1_1_impl.html#aeab24f09fa56e74eb5df960560bab419">TimeStampSource::Impl::okCnt</a></div><div class="ttdeci">unsigned okCnt</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00136">mrmtimesrc.cpp:136</a></div></div>
<div class="ttc" id="mrmtimesrc_8cpp_html_ac3935b62519bf527b4f380b253b0b5ee"><div class="ttname"><a href="mrmtimesrc_8cpp.html#ac3935b62519bf527b4f380b253b0b5ee">Guard</a></div><div class="ttdeci">epicsGuard&lt; epicsMutex &gt; Guard</div><div class="ttdef"><b>Definition:</b> <a href="mrmtimesrc_8cpp_source.html#l00028">mrmtimesrc.cpp:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mrmtimesrc_8h_source.html">mrmtimesrc.h</a></li>
<li><a class="el" href="mrmtimesrc_8cpp_source.html">mrmtimesrc.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 22 2023 08:45:39 for mrfioc2 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
