<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: mrfCommon/src/mrfFracSynth.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_94ff919899d933be1b6abb0111a41984.html">mrfCommon</a></li><li class="navelem"><a class="el" href="dir_e4b7bd9f3fd4bf82a843d00ee59380dd.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mrfFracSynth.c File Reference<div class="ingroups"><a class="el" href="group__mrfCommon.html">MrfCommon</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Support routines for the Micrel SY87739L Fractional-N Synthesizer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;epicsTypes.h&gt;</code><br />
<code>#include &lt;iocsh.h&gt;</code><br />
<code>#include &lt;registryFunction.h&gt;</code><br />
<code>#include &lt;epicsExport.h&gt;</code><br />
<code>#include &lt;mrfFracSynth.h&gt;</code><br />
<code>#include &lt;mrfCommon.h&gt;</code><br />
<code>#include &lt;debugPrint.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae10824b00b8a005d97c74a11cdc9922b"><td class="memItemLeft" align="right" valign="top">epicsShareExtern epicsStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrfCommon.html#gae10824b00b8a005d97c74a11cdc9922b">mrfSetEventClockSpeed</a> (epicsFloat64 InputClockSpeed, epicsUInt32 InputControlWord, epicsFloat64 ReferenceFreq, epicsFloat64 *OutputClockSpeed, epicsUInt32 *OutputControlWord, epicsInt32 PrintFlag)</td></tr>
<tr class="separator:gae10824b00b8a005d97c74a11cdc9922b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae361c0306ceb8ef7701c8bff663c56e3"><td class="memItemLeft" align="right" valign="top">epicsShareExtern epicsUInt32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrfCommon.html#gae361c0306ceb8ef7701c8bff663c56e3">FracSynthControlWord</a> (epicsFloat64 DesiredFreq, epicsFloat64 ReferenceFreq, epicsInt32 debugFlag, epicsFloat64 *Error)</td></tr>
<tr class="separator:gae361c0306ceb8ef7701c8bff663c56e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42a0aecda942f6b758fbace9d8b3cdaa"><td class="memItemLeft" align="right" valign="top">epicsShareExtern epicsFloat64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mrfCommon.html#ga42a0aecda942f6b758fbace9d8b3cdaa">FracSynthAnalyze</a> (epicsUInt32 ControlWord, epicsFloat64 ReferenceFreq, epicsInt32 PrintFlag)</td></tr>
<tr class="separator:ga42a0aecda942f6b758fbace9d8b3cdaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Support routines for the Micrel SY87739L Fractional-N Synthesizer. </p>
<p>This module contains routines to create and analyze the control word for the Micrel SY87739L Fractional-N synthesizer chip. This chip is used in the MRF Series-200 event receiver cards to synchronize with the expected event clock frequency. It is also in the event generator card where it can be used to generate the event clock in the absence of an RF source.</p>
<p>Three routines are provided in this module:</p>
<ul>
<li><em>mrfSetEventClockSpeed</em> - Determines the event clock speed and/or the fractional synthesizer control word given the knowledge of one or the other of these paramters.</li>
<li><em>FracSynthControlWord</em> - Creates an SY87739L control word which will generate the desired frequency from the specified reference frequency. If it can not generate the desired frequency exactly, it will generate a frequency as close to the desired frequency as it can. The routine will return the "error" (expressed in parts-per-million) between the desired and generated frequencies. For the MRF Series-2xx event system, the error must be below +/- 100 ppm.</li>
<li><em>FracSynthAnalyze</em> - Examines the specified SY87739L control word and returns the output frequency that will be generated given the specified reference frequency. Depending on the value of the "PrintFlag" parameter, it will also display the values of the control word fields and how the output frequency is created from them. It will also analyze the control word for programming errors.</li>
</ul>
<p>For convenience, this module also defines EPICS IOC Shell versions of the "FracSynth" routines. The IOC Shell versions only take the first argument. The reference frequency defaults to the MRF input reference frequency (24 MHz) and the debugFlag/PrintFlag are defaulted to produce the maximum amount of printed output.</p>
<dl class="section note"><dt>Note</dt><dd>For the MRF Series-2xx cards, the input reference frequency is 24 Mhz.</dd>
<dd>
To use the EPICS IOC shell definitions, the "Data Base Definition" (dbd) file should include the line:<br  />
 <em>"registrar(FracSynthRegistrar)"</em> </dd>
<dd>
These routines are not suitable for calling from the vxWorks shell as they require floating point input. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
